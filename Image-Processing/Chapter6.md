# Image Filter
------------
## Filter
입력 값에서 원하지 않는 값은 걸러내고 원하는 결과만을 얻는다는 의미로 쓰임
1. 영상의 품격을 높임
2. ** Edge를 검출하고 엣지의 방향을 알아냄 **
> 객체 인식과 분리의 기본이 되는 정보를 계산하고 수행

### 영상처리
새로운 영상을 얻기 위해 기존 픽셀 값에 어떠한 연산을 가해서 새로운 픽셀 값을 얻는 작업

## 공간영역필터; spatial domain filter
기존 픽셀 값 하나가 아닌 그 픽셀과 주변 픽셀들의 값을 활용하는 방법
## 주파수영역필터; frequency domain filter
픽셀 값들의 차이를 주파수로 변환해서 활용하는 방법

## Convolution
공간 영역 필터의 핵심 <br>
### n x n Kernal
window; filter; mask

커널의 각 요소와 대응하는 입력 픽셀 값을 곱해서 모두 합한 것을 결과 픽셀 값으로 결정하고, 이것을 마지막 픽셀까지 반복하는 것
```.py
cv2.filter2D()
# e.g.
dst = cv2.filter2D(src, ddepth, kernel{, dst, anchor, delta, borderType})
```
## Blurring; smoothing
영상을 초점이 맞지 않은 것처럼 흐릿하게 만드는 것
* 가장 쉬운 방법: 주변 픽셀 값들의 평균을 적용하는 것
<br> -> 픽셀 값의 차이가 적어져서 이미지가 흐릿해짐
> cv2.blur
커널의 크기만 지정하면 알아서 평균 커널을 생성해서 블러링을 적용한 영상으로.. 일반적으로 커널의 크기는 일반적으로 홀수!
> cv2.boxFilter

if normalize 인자 <br>
== TRUE blur()함수와 같은 역할 <br>
== FALSE 커널 영역의 모든 픽셀의 합을 구하게 됨 : 밀도를 이용한 객체 추적 알고리즘에 사용

## Gaussian blur
> Gaussian Distribution = NormD
* 평균이 아닌 가우시안 분포를 갖는 커널로 블러링을 하는 것 <br>
* 중앙 값이 가장 크고 멀어질수로 그 값이 작아지는 커널을 사용하는 것을 말함
* 새로운 픽셀 값 설정시 대상 픽세렝 가까울수록 많은 영향을 줘서 원래의 영상과 비슷하면서도 노이즈를 제거하는 효과가 있다.
```.py
cv2.GaussianBlur(src, ksize, sigmaX[, sigmaY, borderType])
# p.221
cv2.filter2D() = cv2.getGaussiankernel()
cv2.GaussianBlur() #노이즈제거!! 
```

## Median Blurring
커널 영역픽셀 값 중에 중간 값을 대상 픽셀 값으로 선택하는 것
* 특) 기존 픽셀 값 중에 하나를 선택하므로 기존 값을 재활용한다는 특징 <br> Salt and Pepper 잡음 제거에 효과적
```cv2.medianBlur()```
## Bilateral
* 등장배경) 블러링 필터는 대체로 잡음을 제거하는 데 효과가 있지만 edge도 흐릿하게 만드는 문제가 있음
* 장점) 이 필터는 이 문제를 개선하기 위해 가우시안 필터와 경계 필터 2개를 사용 <br> => 노이즈x 경계가 비교적 또렷
* 단점) 속도가 느림
-----------
## Edge 검출
배경과 전경을 분리하는 데 가장 기본적인 작업 (객체 인식과 추적의 첫 걸음)

### 샤프닝: 경계를 선명하게, 검출해서 경계에 있는 픽셀만을 골라서 강조함
> Magnitude: 엣지의 강도
Gradient direction ㅗ Edge direction

## 필터
### 로버츠 교차 필터 (Lawrence Roberts, 1963)
* 특징: 기본 미분 커널을 개선한 커널 제안
* 장점: 대각선 방향으로 1과 -1을 배치해서 사선 경계 검출 효과 높임
* 단점: 노이즈에 민감하고 엣지 강도가 약함
### 프리윗 필터 (Judith M.S. Prewitt)
* 특징: 각 방향으로 차분 세번 계산
* 장점: 엣지 강도가 강함, 수직.수평 엣지를 동등하게 찾음
* 단점: 대각선 검출 약함
### 소벨 필터 (Irwin Sobel, 1968)
* 특징: 중심 픽셀의 차분 비중을 두 배로 줌
* 장점: 수평, 수직 대각선 경계 검출에 모두 강한 마스크 <br> 가장 대표적인 1차 미분 마스크 ```cv2.sobel```
* 단점: 커널의 크기가 작은 경우 || 커널의 크기가 커도 그 중심에서 멀어질 수록 엣지 방향성의 정확도가 떨어짐
### 샤르필터 (Scharr)
* 특징: 소벨 필터의 단점을 개선함
### 라플라시안 필터 (Laplacian)---oh's p.125
* 장점: 2차 미분시 경계를 좀 더 정확히 검출
``` cv2.Laplacian() ```
* 주의: 노이즈에 민감하므로 사전에 가우시안 필터로 노이즈 제거 후 사용

### 캐니 엣지 (John F.Canny, 1986)
1. 노이즈 제거
2. 소벨 마스크로 엣지그레디언트 방향 계산
3. 비최대치 억제
4. 이력 스레스 홀딩
* 장점: 경계 검출 결과가 뛰어나고 스레시 홀드 값의 지정에 따라 경계 검출 대상을 조정할 수 있어서 가장 많이 사용하는 함수

## Morphology
* 노이즈 제거, 구멍 메꾸기, 연결되지 않은 경계 이어붙이기 등 형태학적 관점에서의 영상 연산
* 대상: 바이너리 이미지
* 대표적 연산
    * 침식
    * 팽창
    * 두 개 결합한 열림과 닫힘









